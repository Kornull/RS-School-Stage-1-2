(()=>{"use strict";var t,e=function(){return e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)};!function(t){t[t.Error_401=401]="Error_401",t[t.Error_404=404]="Error_404"}(t||(t={}));var r,n=function(){function r(t,e){this.baseLink=t,this.options=e}return r.prototype.getResp=function(t,e){var r=t.endpoint,n=t.options;void 0===e&&(e=function(){throw new Error("No callback for GET response")}),this.load("GET",r,e,n)},r.prototype.errorHandler=function(e){if(!e.ok&&(e.status===t.Error_401||e.status===t.Error_404))throw Error(e.statusText);return e},r.prototype.makeUrl=function(t,r){var n=e(e({},this.options),t),o="".concat(this.baseLink).concat(r,"?");return Object.keys(n).forEach((function(t){o+="".concat(t,"=").concat(n[t],"&")})),o.slice(0,-1)},r.prototype.load=function(t,e,r,n){void 0===n&&(n={}),fetch(this.makeUrl(n,e),{method:t}).then(this.errorHandler).then((function(t){return t.json()})).then((function(t){return r(t)})).catch((function(t){return console.error(t)}))},r}(),o=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(){return t.call(this,"https://nodenews.herokuapp.com/",{apiKey:"f522a8c79f87426cb4ad5026d012501a"})||this}return o(e,t),e}(n);var u,i=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.endpointSource="sources",t.endpointEverything="everything"}(u||(u={}));const s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getSources=function(e){t.prototype.getResp.call(this,{endpoint:u.endpointSource},e)},e.prototype.getNews=function(e,r){for(var n=e.target,o=e.currentTarget;n!==o;){if(n.classList.contains("source__item")){var c=n.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==c&&(o.setAttribute("data-source",c),t.prototype.getResp.call(this,{endpoint:u.endpointEverything,options:{sources:c}},r)))}n=n.parentNode}},e}(c);var a=function(){function t(){}return t.prototype.draw=function(t){var e=t.length>=10?t.filter((function(t,e){return e<10})):t,r=document.createDocumentFragment(),n=document.querySelector("#newsItemTemp");e.forEach((function(t,e){var o=n.content.cloneNode(!0);e%2&&o.querySelector(".news__item").classList.add("alt"),o.querySelector(".news__meta-photo").style.backgroundImage="url(".concat(t.urlToImage||"img/news_placeholder.jpg",")"),o.querySelector(".news__meta-author").textContent=t.author||t.source.name,o.querySelector(".news__meta-date").textContent=t.publishedAt.slice(0,10).split("-").reverse().join("-"),o.querySelector(".news__description-title").textContent=t.title,o.querySelector(".news__description-source").textContent=t.source.name,o.querySelector(".news__description-content").textContent=t.description,o.querySelector(".news__read-more a").setAttribute("href",t.url),r.append(o)}));var o=document.querySelector(".news");o.innerHTML="",o.appendChild(r)},t}();const p=a,l=function(){function t(){}return t.prototype.draw=function(t){var e=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");t.forEach((function(t){var n=r.content.cloneNode(!0);n.querySelector(".source__item-name").textContent=t.name,n.querySelector(".source__item").setAttribute("data-source-id",t.id),e.append(n)})),document.querySelector(".sources").append(e)},t}(),f=function(){function t(){this.news=new p,this.sources=new l}return t.prototype.drawNews=function(t){var e=(null==t?void 0:t.articles)?null==t?void 0:t.articles:[];this.news.draw(e)},t.prototype.drawSources=function(t){var e=(null==t?void 0:t.sources)?null==t?void 0:t.sources:[];this.sources.draw(e)},t}();(new(function(){function t(){this.controller=new s,this.view=new f}return t.prototype.start=function(){var t=this,e=document.querySelector(".sources");null!==e&&e.addEventListener("click",(function(e){return t.controller.getNews(e,(function(e){t.view.drawNews(e)}))})),this.controller.getSources((function(e){t.view.drawSources(e)}))},t}())).start()})();