(()=>{"use strict";var t,e=function(){return e=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e.apply(this,arguments)};!function(t){t[t.Error_401=401]="Error_401",t[t.Error_404=404]="Error_404"}(t||(t={}));var r,o=function(){function r(t,e){this.baseLink=t,this.options=e}return r.prototype.getResp=function(t,e){var r=t.endpoint,o=t.options;void 0===e&&(e=function(){console.error("No callback for GET response")}),this.load("GET",r,e,o)},r.prototype.errorHandler=function(e){if(!e.ok)throw e.status!==t.Error_401&&e.status!==t.Error_404||console.log("Sorry, but there is ".concat(e.status," error: ").concat(e.statusText)),Error(e.statusText);return e},r.prototype.makeUrl=function(t,r){var o=e(e({},this.options),t),n="".concat(this.baseLink).concat(r,"?");return Object.keys(o).forEach((function(t){n+="".concat(t,"=").concat(o[t],"&")})),n.slice(0,-1)},r.prototype.load=function(t,e,r,o){void 0===o&&(o={}),fetch(this.makeUrl(o,e),{method:t}).then(this.errorHandler).then((function(t){return t.json()})).then((function(t){return r(t)})).catch((function(t){return console.error(t)}))},r}(),n=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});const c=function(t){function e(){return t.call(this,"https://nodenews.herokuapp.com/g",{apiKey:"f522a8c79f87426cb4ad5026d012501a"})||this}return n(e,t),e}(o);var u=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getSources=function(e){t.prototype.getResp.call(this,{endpoint:"sources"},e)},e.prototype.getNews=function(e,r){for(var o=e.target,n=e.currentTarget;o!==n;){if(o.classList.contains("source__item")){var c=o.getAttribute("data-source-id");return void(n.getAttribute("data-source")!==c&&(n.setAttribute("data-source",c),t.prototype.getResp.call(this,{endpoint:"everything",options:{sources:c}},r)))}o=o.parentNode}},e}(c);var i=function(){function t(){}return t.prototype.draw=function(t){var e=t.length>=10?t.filter((function(t,e){return e<10})):t,r=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");e.forEach((function(t,e){var n=o.content.cloneNode(!0);e%2&&n.querySelector(".news__item").classList.add("alt"),n.querySelector(".news__meta-photo").style.backgroundImage="url(".concat(t.urlToImage||"img/news_placeholder.jpg",")"),n.querySelector(".news__meta-author").textContent=t.author||t.source.name,n.querySelector(".news__meta-date").textContent=t.publishedAt.slice(0,10).split("-").reverse().join("-"),n.querySelector(".news__description-title").textContent=t.title,n.querySelector(".news__description-source").textContent=t.source.name,n.querySelector(".news__description-content").textContent=t.description,n.querySelector(".news__read-more a").setAttribute("href",t.url),r.append(n)}));var n=document.querySelector(".news");n.innerHTML="",n.appendChild(r)},t}();const a=i,l=function(){function t(){}return t.prototype.draw=function(t){var e=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");t.forEach((function(t){var o=r.content.cloneNode(!0);o.querySelector(".source__item-name").textContent=t.name,o.querySelector(".source__item").setAttribute("data-source-id",t.id),e.append(o)})),document.querySelector(".sources").append(e)},t}(),p=function(){function t(){this.news=new a,this.sources=new l}return t.prototype.drawNews=function(t){var e=(null==t?void 0:t.articles)?null==t?void 0:t.articles:[];this.news.draw(e)},t.prototype.drawSources=function(t){var e=(null==t?void 0:t.sources)?null==t?void 0:t.sources:[];this.sources.draw(e)},t}();(new(function(){function t(){this.controller=new s,this.view=new p}return t.prototype.start=function(){var t=this,e=document.querySelector(".sources");null!==e&&e.addEventListener("click",(function(e){return t.controller.getNews(e,(function(e){t.view.drawNews(e)}))})),this.controller.getSources((function(e){t.view.drawSources(e)}))},t}())).start()})();